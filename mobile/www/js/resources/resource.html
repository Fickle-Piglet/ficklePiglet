<ion-view view-title="Enki">
<ion-content>
<div class="bar bar-header item-input-inset">
  <label class="item-input-wrapper">
    <i class="icon ion-ios-search placeholder-icon"></i>
    <input type="search" placeholder="Search" ng-model="myModel.searchString" >
  </label>
  <button class="button button-clear" data-clear-btn="true">
    Cancel
  </button>
  </div>
<div class="list card">
  <div class="item item-body">
    <img src="{{results[1]}}">
  
  <input id="urlLink" hidden="true" value="{{results[3]}}">
    <div id="trackOne"><img src="../../img/332.gif" id="loading"></div>
    <script src="../wavesurfer.min.js"></script>
    <link rel="stylesheet" href="http://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <script>
      $(document).ready(function(){
//            $("#play").hide()
        $("#pause").hide()
//            $("#rewind").hide()
//            $("#forward").hide()
      })
      $("#forward").on("click", function(){
        wavesurfer.skipForward()
      })
      $("#rewind").on("click", function(){
        wavesurfer.skipBackward()
      })
      $("#play").on("click", function(){
        wavesurfer.play();
        $("#play").hide()
        $("#pause").show()
      })
      $("#pause").on("click", function(){
        wavesurfer.pause();
        $("#play").show()
        $("#pause").hide()
      })
      var wavesurfer = WaveSurfer.create({
        container: document.querySelector('#trackOne'),
        waveColor: 'grey',
        skipLength: 5,
        progressColor: 'black'
      });
      wavesurfer.on('ready', function () {
        wavesurfer.play();
        $("#rewind").show()
        $("#forward").show()
        $("#pause").show()
        $("#loading").hide()
      });
      var activate = function(){
        setTimeout(function(){
          var urlLINK = $("#urlLink").val();
          alert(urlLINK)
          wavesurfer.load(urlLINK);
        }, 1000)
      }
      activate();
      $(".refresh").on("click", function(){
        activate();
      })
    </script>
  <div>
    <h2>{{results[2]}}</h2>
    <p>On {{results[0]}}</p>
    <div class="item tabs tabs-secondary tabs-icon-left">
      <a class="tab-item">
        <i class="icon ion-reply" id="rewind"></i>
      </a>
      <a class="tab-item">
        <i class="icon ion-play" id="play"></i>
      </a>
      <a class="tab-item">
        <i class="icon ion-pause" id="pause"></i>
      </a>
      <a class="tab-item">
        <i class="icon ion-forward" id="forward"></i>
      </a>
    </div>
    <div class="item tabs tabs-secondary tabs-icon-left">
      <a class="tab-item">
        <i class="icon ion-thumbsup" ng-click="likeResource(results[2],results[0]); select(results[2])"></i>
      </a>
      <a class="tab-item">
        <i class="icon ion-thumbsdown" ng-click="dislikeResource(results[2]); select(results[2]); next()"></i>
      </a>
      <a class="tab-item">
        <i class="icon ion-skip-forward" ng-click="next()"></i>
      </a>
    </div>
  </div>
  </div>
</div>
</ion-view>
</ion-content>